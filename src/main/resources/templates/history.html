<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoviesLen Social Network</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
        integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"
        integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script th:src="@{/js/history.js}"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-dark border-bottom border-body fixed-top" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="#">MoviesLen Social Network</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" th:href="@{/}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/movies}">Movies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" th:href="@{/history-insight}">History Insights</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/realtime-insight}">Real-time Insights</a>
                    </li>
                </ul>
                <form class="d-flex" role="search" th:action="@{/movies-search}" th:object="${form}" method="post">
                    <input class="form-control me-2" type="search" placeholder="Search your favorite movie..."
                        aria-label="Search" th:field="*{keyword}">
                    <button class="btn btn-outline-light" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>
    <div class="container-fluid px-4 pt-3">
        <h3 class="h3 mt-5 pt-3">Overview</h3>
        <hr>
        <div class="row">
            <div class="col">
                <h5 class="h5">Age distribution</h5>
                <div style="width: 60%;">
                    <canvas id="age-dist"></canvas>
                </div>
            </div>
            <div class="col">
                <h5 class="h5">Gender distribution</h5>
                <div style="width: 60%;">
                    <canvas id="gender-dist"></canvas>
                </div>
            </div>
            <div class="col">
                <h5 class="h5">Rating distribution</h5>
                <div class="mt-2 pt-2">
                    <canvas id="rating-dist"></canvas>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col">
                <h5 class="h5">Genres distribution</h5>
                <div>
                    <canvas id="genre-dist"></canvas>
                </div>
            </div>
            <div class="col">
                <h5 class="h5">Users' occupation distribution</h5>
                <div>
                    <canvas id="occupation-dist"></canvas>
                </div>
            </div>
        </div>

        <h3 class="h3 mt-5 pt-3">Timeseries Analysis</h3>
        <hr>
        <h5 class="h5">Number of active user over time</h5>
        <center>
            <div style="width: 75%;">
                <canvas id="num-user-time"></canvas>
            </div>
        </center>
        <div class="row mt-3">
            <div class="col">
                <h5 class="h5">Genres' popularity over time</h5>
                <div>
                    <canvas id="genre-pop-time"></canvas>
                </div>
            </div>
            <div class="col">
                <h5 class="h5">Genres' average rating over time</h5>
                <div>
                    <canvas id="genre-rate-time"></canvas>
                </div>
            </div>
        </div>

        <h3 class="h3 mt-5 pt-3">Users' preferences</h3>
        <hr>
        <h5 class="h5">Rating distribution among ages and genres</h5>
        <center>
            <div style="width: 85%;">
                <canvas id="rate-dist-among-age"></canvas>
            </div>
        </center>
        <div class="row">
            <div class="col" style="width: 80%;">
                <h5 class="h5">Genres' popularity among gender</h3>
                <div>
                    <canvas id="genre-dist-among-gender"></canvas>
                </div>
            </div>
            <div class="col">
                <h5 class="h5">Rating distribution among genres</h3>
                <div>
                    <canvas id="rate-dist-among-genre"></canvas>
                </div>
            </div>
        </div>

        <h5 class="h5 mt-2">Genres' popularity among occupation</h5>
        <div class="row d-flex aligh-item-start">
            <ul class="nav flex-column nav-pills col-1" id="genre-dist-among-occupation" role="tablist" aria-orientation="vertical">
                <!-- Insert tabs -->
            </ul>
            <!-- Tab pane -->
            <div class="tab-content col" id="genre-dist-among-occupation-panes">

            </div>
        </div>
        
    </div>
</body>

</html>